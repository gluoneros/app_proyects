<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Kanvan Board{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link href="{{ url_for('static', filename='tailwind.css') }}" rel="stylesheet">
</head>
<body class="bg-gray-100 text-gray-900 min-h-screen">

<!-- Barra de navegaciÃ³n -->
<nav class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white shadow-lg">
    <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
        <a href="{{ url_for('main.dashboard') }}" class="text-2xl font-bold tracking-tight">
            ðŸ“‹ Canban Board
        </a>

        <div class="flex space-x-6 items-center">
            {% if current_user.is_authenticated %}
                <a href="{{ url_for('main.dashboard') }}" 
                    class="hover:bg-blue-500 px-3 py-2 rounded transition">Dashboard</a>
                <span class="text-sm opacity-90">Hola, <strong>{{ current_user.username }}</strong></span>
                <a href="{{ url_for('auth.logout') }}" 
                    class="bg-red-500 hover:bg-red-600 px-4 py-2 rounded font-medium text-sm transition">
                    Salir
                </a>
            {% endif %}
        </div>
    </div>
</nav>

<!-- Contenido principal -->
<div class="container mx-auto py-6">
    {% block content %}{% endblock %}
</div>

<!-- base.html - dentro del <body> o al final -->
<script>
    function toggleNewCardForm(button, listId) {
        const form = document.getElementById(`form-new-card-${listId}`);
        const plus = button.querySelector('span');

        if (!form) return;

        if (form.classList.contains('hidden')) {
            // Mostrar formulario
            form.classList.remove('hidden');
            // Forzar reflow para que la transiciÃ³n funcione
            form.offsetHeight;
            form.classList.remove('opacity-0', 'max-h-0');
            form.classList.add('opacity-100', 'max-h-96');
            if (plus) plus.classList.add('rotate-45');
        } else {
            // Ocultar formulario
            form.classList.remove('opacity-100', 'max-h-96');
            form.classList.add('opacity-0', 'max-h-0');
            if (plus) plus.classList.remove('rotate-45');

            // Esperar a que termine la animaciÃ³n antes de ocultar
            setTimeout(() => {
                if (form.classList.contains('opacity-0')) {
                    form.classList.add('hidden');
                }
            }, 300);
        }
    }
</script>
</body>
</html>